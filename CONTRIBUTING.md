# Contributing Guidelines

There are some things that should be kept in mind when contributing to this project.
- Each commit is expected to pass CI on its own, (even if it's not automatically enforced by the CI pipeline).
- Bug fixes and feature additions should be accompanied by tests.
- Commit messages should at the very least give some explanation of what has changed, writing "Fix." does not count. Gold star to you if the message also includes a motivation.
- Each pull request should add their changes to the [CHANGELOG.md](CHANGELOG.md) and attempt to follow the conventions described in [Keep a Changelog](https://keepachangelog.com).

Structure requirements on commit messages, issues and pull requests are other than that pretty relaxed, (for now ðŸ¤ž).

### Recommended developer tools:

##### LSPs

* [`typos-lsp`](https://github.com/tekumara/typos-lsp)
* [`taplo`](https://github.com/tamasfe/taplo)
* [`rust-analyzer`](https://github.com/rust-lang/rust-analyzer)

{%- if include_precommit -%}
### Using pre-commit hooks

This project makes use of [`pre-commit`](https://pre-commit.com/) hooks. A `pre-commit install` is recommended once the repository has been cloned, unless it has been [auto-enabled](https://pre-commit.com/#automatically-enabling-pre-commit-on-repositories).
{%- endif -%}

### Running tests

Pretty standard procedure apart from noting that some tests may be behind feature flags, so:

```sh
cargo test --all-features
```

{%- if include_mdbook -%}
Book testing may be done by:

```sh
mdbook test
```
{%- endif -%}

### Generating and opening documentation

```sh
cargo doc --no-deps --all-features --open
```

{%- if include_mdbook -%}
Book documentation may be generated by installing [`mdbook`](https://rust-lang.github.io/mdBook/guide/installation.html) before running `mdbook serve --open`.
{%- endif -%}

## Release (for maintainers)

1. Make sure CI is not failing.
2. Bump version in the workspace `Cargo.toml` file.
3. Move the unreleased section in the CHANGELOG.md into a release with the current date added.
4. Finally:

```sh
# <release> should match [0-9]+.[0-9]+.[0-9]+
git commit -am "Prepare <release> release."
git tag "<release>"
git push && git push --tags
```
